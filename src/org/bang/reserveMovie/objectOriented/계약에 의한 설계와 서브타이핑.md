## 계약에 의한 설계와 서브타이핑

- 계약에 의한 설계(Design By Contract, DBC)
  1. 사전조건(precondition)
     클라이언트가 정상적으로 메서드를 실행하기 위해 만족시켜야 하는 것
  2. 사후조건(postcondition)
     메서드가 실행된 후에 서버가 클라이언트에게 보장해야 하는 사후조건
  3. 클래스 불변식(class invariant)
     메서드 실행 전과 실행 후에 인스턴스가 만족시켜야하는 것



- 리스코프 치환 원칙
  어떤 타입이 서브타입이 되기 위해서는 슈퍼타입의 인스턴스와 협력하는 **'클라이언트'의 관점**에서 서브타입의 인스턴스가 슈퍼타입을 대체하더라도 협력에 지장이 없어야 하는 것
  1. 클라이언트와 슈퍼타입 간에 체결된 '계약'을 준수
  2. 서브타입에(BrokenDiscountPolicy)에 **더 강력한 사전조건을 정의할 수 없다**
     기존의 사전조건은 더 강한 사전조건을 허용하지 않기 때문에 협력에 실패
  3. 서브타입에 슈퍼타입과 같거나 **더 약한 사전조건을 정의할 수 있다**
     기존 협력에 어떤 영향도 미치지 않는다
  4. 서브타입에 슈퍼타입과 같거나 **더 강한 사후조건을 정의할 수 있다**
     Movie는 최소한 0원보다 큰 금액을 반환(기존 사후조건)하면 정상적으로 수행하기 때문에 1000원 이상의 금액 반환해도 이상 없음
  5. 서브타입에 **더 약한 사후조건을 정의할 수 없다**
     예매 금액으로 마이너스 금액이 설정되는, 원하지 않던 결과로 이어질 수 있다
## 전화 요금 계산

- ##### Rule

  - 통화 시간을 단위 시간당 요금으로 나눠 주는 것
  - 10초당 5원의 통화료를 부과하는 요금제라고 가정했을 때
    100초 동안 통화를 했다면 요금으로 100 / 10 * 5 = 50원
  - 통화 요금에 부과할 세금 계산 추가
    부과되는 세율은 가입자의 핸드폰마다 다르다고 가정



- Class
  - Call
    개별 통화 기간을 저장하는 클래스
    from : 통화 시작 시간
    to : 종료 시간
  - Phone
    통화 목록을 관리할 클래스
    amount : 단위요금을 저장
    second : 단위시간을 저장
    calls : 전체 통화 목록을 저장
    taxRate : 세율을저장
    - calculateFee : 위 3가지 인스턴스 이요해서 전체 통화 요금 계산
  - NightlyDiscountPhone
    심야 할인 요금제
    밤 10시 이전과 이후를 구분해서 적용할 통화요금 계산
    nightlyAmout : 밤 10시 이후 통화요금
    regularAmout : 밤 10시 이전 통화요금
    secnds : 단위시간 저장
    calss : 전체 통화 목록 저장



- 추가
  - 기본 정책에 세금 정책 조합
    - 기본 정책 : 가입자의 통화 정보를 기반으로 한달 통화량을 기준으로 부과할 요금을 계산(일반 요금제, 심야 할인 요금제)
    - 세금 정책(부과 정책) : 통화량과 무관하게 기본 정책에 선택적으로 추가할 수 있는 요금 방식을 의미(세금 부과)
  - 기본 정책 확장
    - 고정요금 : A초당 B원
    - 시간대별 : A-B까지 C초당 D원,  B-C까지 C초당 E원
    - 요일별 : 평일에는 A초당 B원, 공휴일에 A초당 C원
    - 구간별 : 초기 A분동안 B초당 C원, A-D분까지 B초당 D원, D분 초과시 B초당 E원



-  일관성 부여를 위한 기본 지침
  - 변하는 개념을 변하지 않는 개념으로 분리하라
  - 변하는 개념을 캡슐화하라
    그렇게 하면 나중에 바뀌지 않는 부분에는 영향을 미치지 않은 채로 그 부분만 고치거나 확장 가능 하다
    - 데이터 캡슐화 : 클래스(Movie)의 인스턴스 변수(title)의 가시성을 private로 설정했을 때 외부에서 직접 접근할 수 없다. 이 속성에 접근할 수 있는 유일한 방법은 메서드를 이용하는 것뿐이다.
      다시 말해 클래스는 내부에 관리하는 데이터를 캡슐화 한다
    - 메서드 캡슐화 :  클래스(DiscountPolicy)에 정의돼 있는 메서드(getDiscountAmount)의 가시성을 protected로 하면 클래스의 외부에서는 이 메서드에 직접 접근할 수 없고 클래스 내부와 서브클래스에서만 접근이 가능하다. 따라서 클래스 외부에 영향을 미치지 않고 메서드를 수정할 수 있다.
      다시 말해 클래스의 내부 행동을 캡슐화하고 있는 것이다.
    - 객체 캡슐화 : 클래스(Movie)는 DiscountPolicy 타입의 인스턴스 변수 discountPolicy를 포함한다. 이 인스턴스 변수는 private 가시성을 가지기 때문에 Movie와 DiscountPolicy 사이의 관계를 변경하더라도 외부에는 영향을 미치지 않는다.
      다시 말해서 객체와 객체 사이의 관계를 캡슐화한다.(합성)
    - 서브타입 캡슐화 : 클래스(Movie)는 DiscountPolicy에 대해서는 알고 있지만 AmountDiscountPolicy와 PercentDiscountPolicy에 대해서는 알지 못한다. 그러나 실제로 실행 시점에는 이 클래스들의 인스턴스와 협력할 수 있다.
      다시 말해 서브타입의 종류를 캡슐화하고 있는 것이다.(다형성의 기반)